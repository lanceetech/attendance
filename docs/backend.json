
{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user within the ClassSync system.",
      "properties": {
        "uid": {
          "type": "string",
          "description": "Unique identifier for the user (from Firebase Auth)."
        },
        "name": {
          "type": "string",
          "description": "The name of the user."
        },
        "role": {
          "type": "string",
          "description": "The role of the user (e.g., admin, lecturer, student).",
          "enum": ["admin", "lecturer", "student"]
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        },
        "avatar": {
            "type": "string",
            "description": "A reference to an image placeholder ID."
        }
      },
      "required": ["uid", "name", "role", "email"]
    },
    "Unit": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Unit",
      "type": "object",
      "description": "Represents a unit of study (e.g., a course).",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the unit."
        },
        "description": {
          "type": "string",
          "description": "A description of the unit."
        },
        "code": {
          "type": "string",
          "description": "The unique code for the unit (e.g. CS101)."
        }
      },
      "required": ["name", "description", "code"]
    },
    "Class": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Class",
      "type": "object",
      "description": "Represents a scheduled class session for a unit.",
      "properties": {
        "unitId": {
          "type": "string",
          "description": "Reference to the Unit this class belongs to."
        },
        "lecturerId": {
          "type": "string",
          "description": "Reference to the User ID of the lecturer."
        },
        "lecturerName": {
            "type": "string",
            "description": "The name of the lecturer for display purposes."
        },
        "roomId": {
          "type": "string",
          "description": "Reference to the Room where the class is held."
        },
        "startTime": {
          "type": "string",
          "description": "The start time of the class.",
          "format": "date-time"
        },
        "endTime": {
          "type": "string",
          "description": "The end time of the class.",
          "format": "date-time"
        },
        "day": {
            "type": "string",
            "description": "The day of the week the class is held."
        },
        "time": {
            "type": "string",
            "description": "The time slot for the class (e.g. 08:00 - 10:00)."
        }
      },
      "required": ["unitId", "lecturerId", "startTime", "endTime", "day", "time"]
    },
    "Room": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Room",
      "type": "object",
      "description": "Represents a classroom or lecture hall.",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the room (e.g., 'Room 101')."
        },
        "capacity": {
          "type": "number",
          "description": "The capacity of the room."
        },
        "status": {
            "type": "string",
            "enum": ["Available", "In Use", "Maintenance"]
        }
      },
      "required": ["name", "capacity", "status"]
    },
    "Attendance": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Attendance",
      "type": "object",
      "description": "Represents a single attendance record for a student in a class.",
      "properties": {
        "studentId": {
          "type": "string",
          "description": "Reference to the User ID of the student."
        },
        "studentName": {
            "type": "string",
            "description": "The name of the student who attended."
        },
        "timestamp": {
          "type": "string",
          "description": "The timestamp when the attendance was recorded.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "The attendance status (e.g., Present, Absent, Late).",
          "enum": ["Present", "Absent", "Late"]
        }
      },
      "required": ["studentId", "studentName", "timestamp", "status"]
    },
    "Feedback": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Feedback",
      "type": "object",
      "description": "Represents feedback submitted by users.",
      "properties": {
        "userId": {
          "type": "string",
          "description": "Reference to the User who submitted the feedback."
        },
        "message": {
          "type": "string",
          "description": "The feedback message."
        },
        "timestamp": {
          "type": "string",
          "description": "The timestamp of the feedback submission.",
          "format": "date-time"
        }
      },
      "required": ["userId", "message", "timestamp"]
    }
  },
  "auth": {
    "providers": [
      "anonymous"
    ]
  },
  "firestore": {
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores public profile information for all users. The document ID is the user's Firebase Auth UID."
    },
    "/units/{unitId}": {
      "schema": { "$ref": "#/entities/Unit" },
      "description": "Collection of all available course units."
    },
    "/classes/{classId}": {
      "schema": { "$ref": "#/entities/Class" },
      "description": "Collection of all scheduled class sessions."
    },
    "/classes/{classId}/attendance/{attendanceId}": {
        "schema": { "$ref": "#/entities/Attendance" },
        "description": "Subcollection storing attendance records for a specific class. The document ID can be the student's UID for easy lookup."
    },
    "/classrooms/{roomId}": {
      "schema": { "$ref": "#/entities/Room" },
      "description": "Collection of all physical classrooms and their status."
    },
    "/feedback/{feedbackId}": {
      "schema": { "$ref": "#/entities/Feedback" },
      "description": "Collection for storing all feedback submissions from users."
    },
    "/studentTimetable/{entryId}": {
        "schema": { "$ref": "#/entities/Class" },
        "description": "Denormalized timetable data for all students for quick lookups. In a real app, this might be user-specific."
    },
    "/lecturerTimetable/{entryId}": {
        "schema": { "$ref": "#/entities/Class" },
        "description": "Denormalized timetable data for lecturers for quick lookups."
    }
  }
}
